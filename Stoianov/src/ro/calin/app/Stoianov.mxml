<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" 
			   applicationComplete="application1_applicationCompleteHandler(event)" 
			   xmlns:view="ro.calin.view.*" xmlns:model="ro.calin.model.*" >
	<s:states>
		<s:State name="slideshow"/>
		<s:State name="inapp"/>
	</s:states>
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import ro.calin.controller.CSlideShower;
			import ro.calin.model.MSlideShower;
			import ro.calin.skin.ButtonSkin1;
			
			[Bindable] private var products:ArrayCollection;
			
			private function resultHandler(event:ResultEvent):void
			{
				trace(event.result.config.slideshow.pics);
				
				//must use "for each in" to iterate over collections
				//"for in" is used just for arrays or object props
				for each(var itm in event.result.config.menu.item) {
					trace(itm.name);
				}
			}
			
			private function faultHandler(event:FaultEvent):void
			{
				Alert.show(event.fault.faultDetail, "Error");
			}
			
			

			protected function application1_applicationCompleteHandler(event:FlexEvent):void
			{
				//Alert.show("Complete app");
				//srv.send();
			}
			
			private var slModel:MSlideShower = new MSlideShower("data", "1.jpg|2.jpg|3.jpg|4.jpg|5.jpg", "|", true, 1500);
			var slController:CSlideShower = new CSlideShower(slModel);
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<mx:HTTPService id="srv" url="cfg/config.xml" result="resultHandler(event)"
						fault="faultHandler(event)"/>
	</fx:Declarations>
	
	<view:SlideShower model="{slModel}" controller="{slController}" width="100%" height="100%" backgroundColor="black"/>
	<mx:LinkBar color="0x0050AA" horizontalAlign="center" width="100%" fontWeight="bold" dropShadowVisible="true" 
				horizontalCenter="0" y="500" contentBackgroundColor="#000000">
		<mx:dataProvider>
			<fx:String>portofolio</fx:String>
			<fx:String>info</fx:String>
			<fx:String>links</fx:String>
		</mx:dataProvider>
	</mx:LinkBar>
	<s:Button verticalCenter="0" horizontalCenter="0" skinClass="ro.calin.skin.ButtonSkin1" click="trace('I\'ve been clicked!')" focusIn="trace('focus...on me?')" /> 
</s:Application>
