<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" applicationComplete="application1_applicationCompleteHandler(event)">
	<s:states>
		<s:State name="slideshow"/>
		<s:State name="inapp"/>
	</s:states>
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			[Bindable] private var products:ArrayCollection;
			
			private function resultHandler(event:ResultEvent):void
			{
				trace(event.result.config.slideshow.pics);
				
				//must use "for each in" to iterate over collections
				//"for in" is used just for arrays or object props
				for each(var itm in event.result.config.menu.item) {
					trace(itm.name);
				}
			}
			
			private function faultHandler(event:FaultEvent):void
			{
				Alert.show(event.fault.faultDetail, "Error");
			}
			
			

			protected function application1_applicationCompleteHandler(event:FlexEvent):void
			{
				//Alert.show("Complete app");
				srv.send();
			}

		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<mx:HTTPService id="srv" url="cfg/config.xml" result="resultHandler(event)"
						fault="faultHandler(event)"/>
	</fx:Declarations>
</s:Application>
